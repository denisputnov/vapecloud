{% extends 'base.html' %}
{% load static %}
{% csrf_token %}

{% block localimport %}
<link rel="stylesheet" href="{% static 'css/products-sorting-menu.css' %}">
{% endblock %}

<!-- TODO -->
{% block title %}
Vapecloud - заменить
{% endblock %}

{% block body %}
<p id="mode"></p>

<div class="products-sorting-menu-wrapper">
    <p class="sorting-title">Сортировать по:</p>
    <div class="products-sorting-content">
        <button class="product-sorting-button sort-by-price point" onclick="sortByPriceIncrease()">Сортировать по цене</button>
        <button class="product-sorting-button sort-by-alphabet point" onclick="sortByAlphabetZ()">Сортировать А-я</button>
        <!-- <button class="product-sorting-button sort-by-date">Сортировать по дате</button> -->
    </div>
</div>


<!-- Это весь список продуктов, которые выдаются после поиска -->
<div class="products">
    <!-- FOR PRODUCTS -->
    {% if categorized_products %}
    {% for product in categorized_products %}
    {% if product.category.name == "cloud" %}
    <div class="product" data-title="{{product.title}}" data-brand="{{product.brand}}" data-price="{{product.price}}" data-sale="{{product.sale}}" data-category="{{product.category}}" data-taste="{{product.taste}}" data-volume="{{product.volume}}" data-salt="{{product.salt}}" data-vg_to_pg="{{product.vg_to_pg}}" data-nicotine="{{product.nicotine}}" data-country="{{product.country}}">
        <a href="/item/{{product.category}}/{{product.slug}}/" class="show_item"></a>
        <div class="price_block">
            <h3 class="price">{{product.price}}<span class="rub">Р</span></h3>
        </div>
        <p class="label">{{product.title}}</p>
        <img src="{% static 'images/shadow.png' %}" alt="" class="shadow">
        <img src="{{ MEDIA_ROOT }}{{ product.image.url }}" alt="" class="product_image gradient">
    </div>
    {% elif product.category.name == "other" %}
    <div class="product" data-title="{{product.title}}" data-brand="{{product.brand}}" data-price="{{product.price}}" data-sale="{{product.sale}}" data-category="{{product.category}}">
        <a href="/item/{{product.category}}/{{product.slug}}/" class="show_item"></a>
        <div class="price_block">
            <h3 class="price">{{product.price}}<span class="rub">Р</span></h3>
        </div>
        <p class="label">{{product.title}}</p>
        <img src="{% static 'images/shadow.png' %}" alt="" class="shadow">
        <img src="{{ MEDIA_ROOT }}{{ product.image.url }}" alt="" class="product_image gradient">
    </div>
    {% elif product.category.name == "zhidkosti"  %}
    <div class="product" data-title="{{product.title}}" data-brand="{{product.brand}}" data-price="{{product.price}}" data-sale="{{product.sale}}" data-category="{{product.category}}" data-taste="{{product.taste}}" data-volume="{{product.volume}}" data-salt="{{product.salt}}" data-vg_to_pg="{{product.vg_to_pg}}" data-nicotine="{{product.nicotine}}" data-country="{{product.country}}">
        <a href="/item/{{product.category}}/{{product.slug}}/" class="show_item"></a>
        <div class="price_block">
            <h3 class="price">{{product.price}}<span class="rub">Р</span></h3>
        </div>
        <p class="label">{{product.title}}</p>
        <img src="{% static 'images/shadow.png' %}" alt="" class="shadow">
        <img src="{{ MEDIA_ROOT }}{{ product.image.url }}" alt="" class="product_image gradient">
    </div>
    {% else %}
    <div class="product" data-title="{{product.title}}" data-brand="{{product.brand}}" data-price="{{product.price}}" data-sale="{{product.sale}}" data-category="{{product.category}}" data-type_category="{{product.type_category}}">
        <a href="/item/{{product.category}}/{{product.slug}}/" class="show_item"></a>
        <div class="price_block">
            <h3 class="price">{{product.price}}<span class="rub">Р</span></h3>
        </div>
        <p class="label">{{product.title}}</p>
        <img src="{% static 'images/shadow.png' %}" alt="" class="shadow">
        <img src="{{ MEDIA_ROOT }}{{ product.image.url }}" alt="" class="product_image gradient">
    </div>
    {% endif %}
    {% endfor %}
    {% else %}
        <h3>Товаров не найдено</h3>
    {% endif %}
</div>
<script src="{% static 'scripts/products-sorting.js' %}"></script>
<script src="{% static 'scripts/products-sorting-model.js' %}"></script>
<script src="{% static 'scripts/products-sorting-utils.js' %}"></script>
{% endblock %}